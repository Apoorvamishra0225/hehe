<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./loveTruck.css">
    <link rel="stylesheet" href="./envelope.css">
    <title>To my love üíñ</title>
    <style>

          .content {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1; /* Allow the content to grow and take available space */
        }
        /* Add some basic styling for the button */

         .footer {
            position: absolute;
            bottom: 20px;
            text-align: center;
            width: 100%;
        }
          #playButton, #nextPageButton {
            display: block;
            margin: 10px auto;
            padding: 20px 40px; /* Large padding for bigger buttons */
            font-size: 24px; /* Larger font size */
            color: white;
            background-color: rgb(255, 239, 255); /* Match the background color */
            border: none;
            border-radius: 10px; /* Rounded corners */
            cursor: pointer;
        }

      #playButton:hover, #nextPageButton:hover {
            background-color: rgb(255, 220, 220); /* Slightly darker pink on hover */
        }

        #audioMessage {
            font-size: 18px;
            color: #333;
        }

         .letter-content {
            display: none; /* Initially hidden */
        }
    </style>
</head>
<body>
    <div class="content">
    <div class="envelope-container">
        <div class="envelope">
            <div class="envelope__tab"></div>
          <div class="envelope__letter" id="letter">
                <p>Meeting you was like listening to a song for the first time and knowing it would be my favorite.üíñ i love you darlingüåç</p>
            </div>
          <div class="envelope--base"></div> 
        </div>
    </div>

    <div class="truck-container">
        <div class="container">
            <div class="ts">
           <div class="box"></div>
            <div class="front">
                
                <div class="light"></div>
                <div class="trapezoid"></div>
                <div class="pipe"></div>
                <div class="pipe2"></div>
                <img class="img1" src="https://i.gifer.com/5zoP.gif">
                <img class="img2" src="https://i.gifer.com/5zoP.gif">
                <img class="img3" src="https://i.gifer.com/5zoP.gif">
                <img class="img4" src="https://i.gifer.com/5zoP.gif">
                <img class="img5" src="https://i.gifer.com/5zoP.gif">
                <img class="img6" src="https://i.gifer.com/5zoP.gif">
                <img class="img7" src="https://i.gifer.com/5zoP.gif">
                <img class="img8" src="https://i.gifer.com/5zoP.gif">
                <img class="img9" src="https://i.gifer.com/5zoP.gif">
                <img class="img10" src="https://i.gifer.com/5zoP.gif">
                <img class="img11" src="https://i.gifer.com/5zoP.gif">
                <div class="front1"></div>
                <div class="front2"></div>
                <div class="window"></div>
                 <div class="hood"></div>    
            </div>
             <div class="tyre1">
                <div class="r1"></div>
                <div class="r2"></div>
                <div class="r3"></div>
                <div class="r4"></div>
                <div class="r5"></div>
                <div class="r6"></div>
             </div>
             <div class="tyre2">
                <div class="r1"></div>
                <div class="r2"></div>
                <div class="r3"></div>
                <div class="r4"></div>
                <div class="r5"></div>
                <div class="r6"></div>
             </div>
             <div class="tyre3">
                <div class="r1"></div>
                <div class="r2"></div>
                <div class="r3"></div>
                <div class="r4"></div>
                <div class="r5"></div>
                <div class="r6"></div>
             </div>
             <div class="tyre4">
                <div class="r1"></div>
                <div class="r2"></div>
                <div class="r3"></div>
                <div class="r4"></div>
                <div class="r5"></div>
                <div class="r6"></div>
             </div>
            </div>
        </div>
    </div>
    </div>
    
 <div class="footer">
        <button id="playButton">Play Music</button>
        <p id="audioMessage">Click the "Play Music" button to start the music and then hover the mouse on the letter and then click on the next page.</p>
        <button id="nextPageButton">Next page</button>
    </div>

      <audio id="myAudio" preload="auto">
        <source src="03-taylor_swift-love_story_64kb.mp3" type="audio/mp3">
        Your browser does not support the audio element.
    </audio>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var audio = document.getElementById('myAudio');
            var playButton = document.getElementById('playButton');
            var audioMessage = document.getElementById('audioMessage');
            var nextPageButton = document.getElementById('nextPageButton');
            var letter = document.getElementById('letter');
            var letterContent = document.querySelector('.letter-content');

              // Check and set the music playback state
            var isPlaying = localStorage.getItem('isPlaying') === 'true';
            if (isPlaying) {
                audio.play();
            } else {
                audio.pause();
            }

            // Attempt to play the audio automatically
            audio.play().catch(function(error) {
                console.log('Autoplay was prevented: ', error);
                // If autoplay fails, show the message and button
                audioMessage.style.display = 'block';
                playButton.style.display = 'block';
                audio.play().catch(function() {
                        console.log('Playback failed');
                    });
                    localStorage.setItem('isPlaying', 'true');
            });

            // Button click to play the audio
            playButton.addEventListener('click', function() {
                audio.play().catch(function(error) {
                    console.log('Playback failed: ', error);
                });
            });
            // Simulate letter opening
            setTimeout(function() {
                letterContent.style.display = 'block'; // Show the letter content
                // Show the next page button after 2 seconds
                setTimeout(function() {
                    nextPageButton.style.display = 'block';
                }, 2000);
            }, 0); // Set to 0 for immediate effect

            // Button click to go to the next page
            nextPageButton.addEventListener('click', function() {
                localStorage.setItem('isPlaying', audio.paused ? 'false' : 'true');
                window.location.href = '../doyouwannagooutwithme/index.html'; // Replace with your actual next page URL
            });

        });
    </script>
    
</body>
</html>